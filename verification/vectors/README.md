# Test Vectors

This directory is for storing test vectors used in verification.

## Purpose

Test vectors are input/output patterns used to verify block functionality. They can be:
- Hand-crafted test patterns
- Generated by scripts
- Golden reference outputs

## Format

Test vectors can be stored in various formats:

### 1. Text Files (.txt)

Simple space or comma-separated values:
```
# time(ns) clk rst expected_output
0 0 1 0
10 1 1 0
20 0 0 0
30 1 0 1
```

### 2. CSV Files (.csv)

```csv
time_ns,clk,rst,expected_q
0,0,1,0
10,1,1,0
20,0,0,0
30,1,0,1
```

### 3. VCD Files (.vcd)

Value Change Dump format from simulations, useful for comparing results.

## Usage

Test vectors can be:
1. **Read by testbenches**: Load expected values for comparison
2. **Generated by scripts**: Create comprehensive test patterns
3. **Used for regression**: Verify changes don't break functionality

## Directory Structure

```
vectors/
├── <block-name>/
│   ├── functional_test.txt
│   ├── corner_test.txt
│   └── golden_output.vcd
```

## Creating Test Vectors

### Manual Creation

For simple blocks, create test vectors by hand:
```bash
echo "# CLK RST Q" > vectors/dff/basic_test.txt
echo "0 1 0" >> vectors/dff/basic_test.txt
echo "1 1 0" >> vectors/dff/basic_test.txt
```

### Script Generation

For complex patterns, use scripts:
```python
#!/usr/bin/env python3
# generate_counter_vectors.py

with open('vectors/counter/count_sequence.txt', 'w') as f:
    f.write("# time clk rst expected_count\n")
    for i in range(20):
        time = i * 10
        clk = i % 2
        rst = 1 if i < 2 else 0
        count = 0 if i < 2 else (i // 2) % 16
        f.write(f"{time} {clk} {rst} {count}\n")
```

## Verification with Vectors

In ngspice testbench, you can compare simulation results with expected vectors and flag mismatches.

## Tips

1. **Document format**: Clearly comment the format and units
2. **Cover corner cases**: Include edge cases and boundaries
3. **Version control**: Track test vectors in git
4. **Organize by test type**: Separate functional, timing, corner tests
5. **Golden vectors**: Save known-good outputs for regression testing

## References

- [VERIFICATION_PLAN.md](../../docs/VERIFICATION_PLAN.md)
